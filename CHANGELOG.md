# 更新日志

本文档记录了 Momentum Backend 项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 新增
- ✨ WebSocket 命令系统，支持通过 WebSocket 进行实时 CRUD 操作
  - 标签管理命令（创建、更新、删除、查询、批量操作）
  - 团队管理命令（团队和成员管理）
  - 工作区管理命令（工作区和成员管理）
  - 项目管理命令
  - 任务管理命令
  - 项目状态管理命令
  - 用户资料管理命令
- ✨ 事件订阅系统
  - 基于主题的事件订阅和取消订阅
  - 业务事件自动推送
  - 灵活的事件路由机制
- ✨ 速率限制功能
  - 基于用户的请求速率控制
  - 令牌桶算法实现
  - 可配置的限制阈值
- ✨ WebSocket 连接监控
  - 实时连接统计
  - 性能指标监控
  - 自动健康检查
  - 管理 API 端点
- ✨ 批量操作支持
  - 批量创建标签
  - 批量更新标签
  - 批量删除标签
- ✨ 重试与超时机制
  - 自动重试失败操作
  - 支持指数退避
  - 超时控制
- ✨ Docker 和 Docker Compose 支持
  - 完整的 Dockerfile
  - Docker Compose 配置文件
  - .dockerignore 优化
- ✨ 完善的文档系统
  - 更新的 README.md
  - 贡献指南 (CONTRIBUTING.md)
  - 环境变量示例 (env.example)
  - 完整的示例代码列表

### 改进
- 🔄 优化登录性能
  - 改进 bcrypt 配置
  - 添加 Redis 缓存
  - 减少数据库查询
- 🔄 增强 WebSocket 安全性
  - JWT 认证验证
  - 连接速率限制
  - 自动清理过期连接
- 🔄 优化数据库查询
  - 工作区切换优化
  - 减少 N+1 查询问题
  - 添加适当的索引
- 🔄 改进项目结构
  - 模块化 WebSocket 代码
  - 分离命令和事件处理
  - 更清晰的代码组织

### 文档
- 📚 添加系统架构图
- 📚 完善 WebSocket 使用文档
- 📚 添加所有示例代码的说明
- 📚 添加高级功能详解
- 📚 添加常见问题解答
- 📚 添加快速链接导航
- 📚 添加更新日志记录

### 配置
- ⚙️ 添加环境变量示例文件
- ⚙️ 优化 Docker 构建配置
- ⚙️ 添加 .dockerignore

## [0.1.0] - 初始版本

### 新增
- 🎉 项目初始化
- 👤 用户认证系统
  - JWT 令牌认证
  - 用户注册和登录
  - 用户资料管理
  - 密码加密（bcrypt）
- 🏢 工作区管理
  - 创建和管理工作区
  - 工作区成员管理
  - 工作区切换
  - 邀请系统
- 📊 项目管理
  - 项目 CRUD 操作
  - 项目状态管理
  - 项目优先级
- 📝 任务管理
  - Issue CRUD 操作
  - 任务状态流转
  - 任务分配
  - 任务标签
- 👥 团队管理
  - 团队 CRUD 操作
  - 团队成员管理
  - 权限控制
- 🏷️ 标签系统
  - 多级标签支持（工作区、项目、Issue）
  - 标签 CRUD 操作
  - 颜色管理
- 🔄 工作流管理
  - 工作流定义
  - 工作流状态
  - 状态流转规则
- 💬 评论功能
  - Issue 评论
  - 评论 CRUD 操作
  - 评论关联
- 🔌 WebSocket 实时通信
  - WebSocket 连接管理
  - 消息广播
  - 点对点消息
  - 心跳检测
  - 用户在线状态
- 🗄️ 数据库
  - PostgreSQL 数据库
  - Diesel ORM
  - 数据库迁移
  - 完整的数据模型
- 💾 Redis 缓存
  - 用户缓存
  - 会话缓存
  - 热点数据缓存
- 🔐 安全功能
  - JWT 认证
  - CORS 配置
  - 输入验证
  - SQL 注入防护
- 📊 日志和监控
  - 结构化日志（tracing）
  - 请求追踪
  - 性能监控
- 🧪 测试
  - 单元测试
  - 集成测试
  - WebSocket 测试
  - 性能测试工具

### 技术栈
- Rust 2024 edition
- Axum web 框架
- Diesel ORM
- PostgreSQL 数据库
- Redis 缓存
- Tokio 异步运行时
- WebSocket (tokio-tungstenite)
- JWT 认证
- bcrypt 密码加密

---

## 图例

- 🎉 项目里程碑
- ✨ 新增功能
- 🔄 改进优化
- 🐛 Bug 修复
- 📚 文档更新
- ⚙️ 配置更改
- 🔐 安全更新
- 🧪 测试相关
- 🗄️ 数据库更改
- 💾 缓存相关
- 🔌 WebSocket 相关
- 👤 用户相关
- 🏢 工作区相关
- 📊 项目相关
- 📝 任务相关
- 👥 团队相关
- 🏷️ 标签相关
- 💬 评论相关

